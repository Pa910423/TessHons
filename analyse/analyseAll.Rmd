---
title: "analyseAll"
author: "Alex Holcombe"
date: "7/28/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Load data

```{r load file}
library(readr)
dataWithPath<- file.path("dataAnonymized","PSYC1anonymized.csv")

tb<- read_csv(dataWithPath)


```

Install skimr
```{r pressure, echo=FALSE}
#devtools::install_github("ropenscilabs/skimr")
#install.packages("tidyselect")  and from source to get 0.2.4 needed
library(skimr)
```

## Inspect data
```{r i, echo=FALSE}
skim(df)
```

Load ggplot and dplyr
```{r i, echo=FALSE}
library(ggplot2)
library(dplyr)
```

## Proportion correct

```{r i, echo=FALSE}
#Look at one-target performance
tbOne <- tb %>% filter(oneTarget == "True") 
eachCorrOne<- tbOne %>% group_by(rightResponseFirst) %>% summarise_at(c("correct0","correct1"),mean)
```


```{r i, echo=FALSE}
#Exclude trials with one target, three targets
tbTwo <- tb %>% filter(oneTarget == "False", numSimultaneousStim < 3) 
eachCorrect<- tbTwo %>% summarise_at(c("correct0","correct1"),mean)
avgCorrect = rowMeans(eachCorrect)
```

```{r}
if (avgCorrect < .5) {
  shouldExclude = TRUE
}
practiceTrials = 3
df$experimentPhase<-NULL
df<- df %>% mutate(practice= trialnum<=2)
#Sanity check what ISIframes got to
longestISIframes<- max( df %>% filter(practice==0) %>% select("ISIframes") )
S<-data.frame()
S$name<-df$subject[1]
```
